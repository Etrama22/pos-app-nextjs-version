(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,389,55436,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157),r=e.i(37727);function l({isOpen:e,onClose:l,title:d,children:n,size:i="md"}){return(s.useEffect(()=>{let a=e=>{"Escape"===e.key&&l()};return e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[e,l]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),(0,a.jsxs)("div",{className:(0,t.cn)("relative z-50 w-full mx-4 bg-white rounded-xl shadow-xl",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[i]),children:[d&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-secondary-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:d}),(0,a.jsx)("button",{onClick:l,className:"p-1 rounded-lg text-secondary-500 hover:text-secondary-700 hover:bg-secondary-100 transition-colors",children:(0,a.jsx)(r.X,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-4",children:n})]})]}):null}e.s(["Modal",()=>l],389);let d=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>d],55436)},93479,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,type:s,label:r,error:l,helperText:d,...n},i)=>(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:r}),(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-10 w-full rounded-lg border border-secondary-300 bg-white px-3 py-2 text-sm text-secondary-900 placeholder:text-secondary-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-secondary-50",l&&"border-red-500 focus:ring-red-500 focus:border-red-500",e),ref:i,...n}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),d&&!l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:d})]}));r.displayName="Input",e.s(["Input",()=>r])},15288,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("rounded-xl border border-secondary-200 bg-white shadow-sm",e),...s}));r.displayName="Card";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("h3",{ref:r,className:(0,t.cn)("text-lg font-semibold leading-none tracking-tight text-secondary-900",e),...s}));d.displayName="CardTitle",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("p",{ref:r,className:(0,t.cn)("text-sm text-secondary-500",e),...s})).displayName="CardDescription";let n=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",e),...s}));n.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardHeader",()=>l,"CardTitle",()=>d])},87486,e=>{"use strict";var a=e.i(43476),s=e.i(75157);function t({className:e,variant:t="default",...r}){return(0,a.jsx)("span",{className:(0,s.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-primary-100 text-primary-800"}[t],e),...r})}e.s(["Badge",()=>t])},84774,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{className:"w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})}));r.displayName="Table";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("thead",{ref:r,className:(0,t.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s}));d.displayName="TableBody",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,t.cn)("bg-secondary-50 font-medium",e),...s})).displayName="TableFooter";let n=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tr",{ref:r,className:(0,t.cn)("border-b border-secondary-200 transition-colors hover:bg-secondary-50 data-[state=selected]:bg-secondary-100",e),...s}));n.displayName="TableRow";let i=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("th",{ref:r,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-secondary-500 [&:has([role=checkbox])]:pr-0",e),...s}));i.displayName="TableHead";let c=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("td",{ref:r,className:(0,t.cn)("p-4 align-middle text-secondary-900 [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("caption",{ref:r,className:(0,t.cn)("mt-4 text-sm text-secondary-500",e),...s})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>d,"TableCell",()=>c,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n])},94918,e=>{"use strict";let a=(0,e.i(75254).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>a],94918)},53507,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(17255),r=e.i(18566),l=e.i(15288),d=e.i(19455),n=e.i(93479),i=e.i(84774),c=e.i(87486),o=e.i(389),x=e.i(75157),m=e.i(55436),h=e.i(75254);let f=(0,h.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,h.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var u=e.i(1928);let y=(0,h.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),j=(0,h.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var b=e.i(94918);function N(){let{data:e,status:h}=(0,t.useSession)(),N=(0,r.useRouter)(),[g,w]=s.useState([]),[v,C]=s.useState(0),[T,k]=s.useState(1),[R,S]=s.useState(""),[M,H]=s.useState(null),[E,L]=s.useState(null),[I,P]=s.useState(""),[U,z]=s.useState(""),[B,A]=s.useState(!1);s.useEffect(()=>{"unauthenticated"===h?N.push("/login"):e?.user?.role!=="ADMIN"&&N.push("/pos")},[h,e,N]),s.useEffect(()=>{D(),O()},[T,I,U]);let D=async()=>{try{let e=new URLSearchParams({page:T.toString(),limit:"10",...I&&{startDate:I},...U&&{endDate:U}}),a=await fetch(`/api/sales?${e}`);if(a.ok){let e=await a.json();w(e.data),C(e.pagination.total)}}catch(e){console.error("Error fetching sales:",e)}},O=async()=>{try{let e=new URLSearchParams({...I&&{startDate:I},...U&&{endDate:U}}),a=await fetch(`/api/sales/summary?${e}`);if(a.ok){let e=await a.json();L(e)}}catch(e){console.error("Error fetching summary:",e)}},F={CASH:"Tunai",DEBIT:"Debit",CREDIT:"Kredit",QRIS:"QRIS",TRANSFER:"Transfer"},$=async()=>{A(!0);try{let e=new URLSearchParams({...I&&{startDate:I},...U&&{endDate:U}}),a=await fetch(`/api/sales/export/csv?${e}`);if(a.ok){let e=await a.blob(),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`laporan-penjualan-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}}catch(e){console.error("Error exporting CSV:",e)}finally{A(!1)}},q=async()=>{A(!0);try{let e=new URLSearchParams({...I&&{startDate:I},...U&&{endDate:U}}),a=await fetch(`/api/sales/export/pdf?${e}`);if(a.ok){let e=await a.blob(),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`laporan-penjualan-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}}catch(e){console.error("Error exporting PDF:",e)}finally{A(!1)}};return"loading"===h?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Riwayat Penjualan"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Laporan transaksi penjualan"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.Button,{variant:"outline",onClick:$,disabled:B,children:[(0,a.jsx)(b.FileSpreadsheet,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,a.jsxs)(d.Button,{variant:"outline",onClick:q,disabled:B,children:[(0,a.jsx)(j,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]}),E&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Total Transaksi"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:E.totalSales})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(u.ShoppingCart,{className:"w-6 h-6 text-primary-600"})})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Total Pendapatan"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:(0,x.formatCurrency)(E.totalRevenue)})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(p,{className:"w-6 h-6 text-green-600"})})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Rata-rata Transaksi"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:(0,x.formatCurrency)(E.averageTransaction)})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(y,{className:"w-6 h-6 text-blue-600"})})]})})})]}),(0,a.jsxs)(l.Card,{children:[(0,a.jsx)(l.CardHeader,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)(m.Search,{className:"w-5 h-5 text-secondary-400"}),(0,a.jsx)(n.Input,{placeholder:"Cari transaksi...",value:R,onChange:e=>S(e.target.value),className:"border-0 shadow-none focus:ring-0"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{type:"date",value:I,onChange:e=>P(e.target.value),className:"w-40"}),(0,a.jsx)(n.Input,{type:"date",value:U,onChange:e=>z(e.target.value),className:"w-40"})]})]})}),(0,a.jsxs)(l.CardContent,{children:[(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"No. Struk"}),(0,a.jsx)(i.TableHead,{children:"Tanggal"}),(0,a.jsx)(i.TableHead,{children:"Total"}),(0,a.jsx)(i.TableHead,{children:"Pembayaran"}),(0,a.jsx)(i.TableHead,{children:"Items"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,a.jsx)(i.TableBody,{children:g.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"font-medium",children:e.receiptNumber}),(0,a.jsx)(i.TableCell,{children:(0,x.formatDateTime)(e.createdAt)}),(0,a.jsx)(i.TableCell,{className:"font-semibold text-primary-600",children:(0,x.formatCurrency)(e.total)}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(c.Badge,{variant:"info",children:F[e.paymentMethod]})}),(0,a.jsxs)(i.TableCell,{children:[e.items.length," items"]}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsx)(d.Button,{size:"sm",variant:"ghost",onClick:()=>H(e),children:(0,a.jsx)(f,{className:"w-4 h-4"})})})]},e.id))})]}),0===g.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.ShoppingCart,{className:"w-12 h-12 text-secondary-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-secondary-500",children:"Tidak ada transaksi"})]}),v>10&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,a.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>k(e=>Math.max(1,e-1)),disabled:1===T,children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",T," of ",Math.ceil(v/10)]}),(0,a.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>k(e=>e+1),disabled:T>=Math.ceil(v/10),children:"Next"})]})]})]}),(0,a.jsx)(o.Modal,{isOpen:!!M,onClose:()=>H(null),title:"Detail Transaksi",size:"lg",children:M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-secondary-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-secondary-600",children:"No. Struk"}),(0,a.jsx)("p",{className:"font-medium",children:M.receiptNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-secondary-600",children:"Tanggal"}),(0,a.jsx)("p",{className:"font-medium",children:(0,x.formatDateTime)(M.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-secondary-600",children:"Pembayaran"}),(0,a.jsx)("p",{className:"font-medium",children:F[M.paymentMethod]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-secondary-600",children:"Total"}),(0,a.jsx)("p",{className:"font-bold text-primary-600",children:(0,x.formatCurrency)(M.total)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Items"}),(0,a.jsx)("div",{className:"space-y-2",children:M.items.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-secondary-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-secondary-600",children:[e.quantity," x ",(0,x.formatCurrency)(e.priceAtSale)]})]}),(0,a.jsx)("p",{className:"font-semibold",children:(0,x.formatCurrency)(e.quantity*e.priceAtSale)})]},e.id))})]})]})})]})}e.s(["default",()=>N],53507)}]);