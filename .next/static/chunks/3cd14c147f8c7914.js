(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84774,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{className:"w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})}));r.displayName="Table";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("thead",{ref:r,className:(0,t.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,t.cn)("bg-secondary-50 font-medium",e),...s})).displayName="TableFooter";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tr",{ref:r,className:(0,t.cn)("border-b border-secondary-200 transition-colors hover:bg-secondary-50 data-[state=selected]:bg-secondary-100",e),...s}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("th",{ref:r,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-secondary-500 [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let n=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("td",{ref:r,className:(0,t.cn)("p-4 align-middle text-secondary-900 [&:has([role=checkbox])]:pr-0",e),...s}));n.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("caption",{ref:r,className:(0,t.cn)("mt-4 text-sm text-secondary-500",e),...s})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>c,"TableHeader",()=>l,"TableRow",()=>d])},94918,e=>{"use strict";let a=(0,e.i(75254).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>a],94918)},389,55436,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157),r=e.i(37727);function l({isOpen:e,onClose:l,title:i,children:d,size:c="md"}){return(s.useEffect(()=>{let a=e=>{"Escape"===e.key&&l()};return e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[e,l]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),(0,a.jsxs)("div",{className:(0,t.cn)("relative z-50 w-full mx-4 bg-white rounded-xl shadow-xl",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[c]),children:[i&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-secondary-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:i}),(0,a.jsx)("button",{onClick:l,className:"p-1 rounded-lg text-secondary-500 hover:text-secondary-700 hover:bg-secondary-100 transition-colors",children:(0,a.jsx)(r.X,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-4",children:d})]})]}):null}e.s(["Modal",()=>l],389);let i=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>i],55436)},93479,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,type:s,label:r,error:l,helperText:i,...d},c)=>(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:r}),(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-10 w-full rounded-lg border border-secondary-300 bg-white px-3 py-2 text-sm text-secondary-900 placeholder:text-secondary-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-secondary-50",l&&"border-red-500 focus:ring-red-500 focus:border-red-500",e),ref:c,...d}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),i&&!l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:i})]}));r.displayName="Input",e.s(["Input",()=>r])},15288,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("rounded-xl border border-secondary-200 bg-white shadow-sm",e),...s}));r.displayName="Card";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("h3",{ref:r,className:(0,t.cn)("text-lg font-semibold leading-none tracking-tight text-secondary-900",e),...s}));i.displayName="CardTitle",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("p",{ref:r,className:(0,t.cn)("text-sm text-secondary-500",e),...s})).displayName="CardDescription";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},87486,e=>{"use strict";var a=e.i(43476),s=e.i(75157);function t({className:e,variant:t="default",...r}){return(0,a.jsx)("span",{className:(0,s.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-primary-100 text-primary-800"}[t],e),...r})}e.s(["Badge",()=>t])},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},72568,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(17255),r=e.i(18566),l=e.i(15288),i=e.i(19455),d=e.i(93479),c=e.i(389),n=e.i(84774),o=e.i(87486),m=e.i(73635),x=e.i(75157),h=e.i(7233),u=e.i(55436);let p=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var f=e.i(27612),y=e.i(88844),b=e.i(94918);function j(){let{data:e,status:j}=(0,t.useSession)(),g=(0,r.useRouter)(),{showToast:v}=(0,m.useToast)(),[N,k]=s.useState([]),[w,C]=s.useState(0),[T,S]=s.useState(1),[R,M]=s.useState(""),[P,H]=s.useState(!1),[A,B]=s.useState(null),[U,E]=s.useState(!1),[I,L]=s.useState(!1),[z,O]=s.useState({name:"",description:"",price:"",stock:"",imageUrl:"",category:"",barcode:"",isActive:!0});s.useEffect(()=>{"unauthenticated"===j?g.push("/login"):e?.user?.role!=="ADMIN"&&g.push("/pos")},[j,e,g]),s.useEffect(()=>{D()},[T,R]);let D=async()=>{try{let e=new URLSearchParams({page:T.toString(),limit:"10",...R&&{search:R}}),a=await fetch(`/api/products?${e}`);if(a.ok){let e=await a.json();k(e.data),C(e.pagination.total)}}catch(e){console.error("Error fetching products:",e)}},F=async e=>{e.preventDefault(),E(!0);try{let e=A?`/api/products/${A.id}`:"/api/products",a=await fetch(e,{method:A?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...z,price:parseFloat(z.price),stock:parseInt(z.stock)})});if(a.ok)v("success",A?"Produk berhasil diupdate":"Produk berhasil ditambahkan"),H(!1),V(),D();else{let e=await a.json();v("error",e.error||"Gagal menyimpan produk")}}catch(e){v("error","Terjadi kesalahan")}finally{E(!1)}},K=async e=>{if(confirm("Yakin ingin menghapus produk ini?"))try{let a=await fetch(`/api/products/${e}`,{method:"DELETE"});if(a.ok)v("success","Produk berhasil dihapus"),D();else{let e=await a.json();v("error",e.error||"Gagal menghapus produk")}}catch(e){v("error","Terjadi kesalahan")}},V=()=>{B(null),O({name:"",description:"",price:"",stock:"",imageUrl:"",category:"",barcode:"",isActive:!0})},q=async()=>{L(!0);try{let e=await fetch("/api/products/export/csv");if(e.ok){let a=await e.blob(),s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=`daftar-produk-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t),v("success","Export berhasil")}}catch(e){console.error("Error exporting CSV:",e),v("error","Gagal export data")}finally{L(!1)}};return"loading"===j?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Manajemen Produk"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Kelola data produk"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",onClick:q,disabled:I,children:[(0,a.jsx)(b.FileSpreadsheet,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,a.jsxs)(i.Button,{onClick:()=>H(!0),children:[(0,a.jsx)(h.Plus,{className:"w-4 h-4 mr-2"}),"Tambah Produk"]})]})]}),(0,a.jsxs)(l.Card,{children:[(0,a.jsx)(l.CardHeader,{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 border border-gray-200 max-w-max rounded-xl px-2",children:[(0,a.jsx)(u.Search,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)(d.Input,{placeholder:"Cari produk...",value:R,onChange:e=>M(e.target.value),className:"border-0 shadow-none focus:ring-0"})]})}),(0,a.jsxs)(l.CardContent,{children:[(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Nama"}),(0,a.jsx)(n.TableHead,{children:"Harga"}),(0,a.jsx)(n.TableHead,{children:"Stok"}),(0,a.jsx)(n.TableHead,{children:"Kategori"}),(0,a.jsx)(n.TableHead,{children:"Status"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,a.jsx)(n.TableBody,{children:N.map(e=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-10 h-10 rounded object-cover"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded flex items-center justify-center",children:(0,a.jsx)(y.Package,{className:"w-5 h-5 text-secondary-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-secondary-500 line-clamp-1",children:e.description})]})]})}),(0,a.jsx)(n.TableCell,{children:(0,x.formatCurrency)(e.price)}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(o.Badge,{variant:e.stock>10?"success":e.stock>0?"warning":"danger",children:e.stock})}),(0,a.jsx)(n.TableCell,{children:e.category||"-"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(o.Badge,{variant:e.isActive?"success":"default",children:e.isActive?"Aktif":"Nonaktif"})}),(0,a.jsx)(n.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>{B(e),O({name:e.name,description:e.description||"",price:e.price.toString(),stock:e.stock.toString(),imageUrl:e.imageUrl||"",category:e.category||"",barcode:e.barcode||"",isActive:e.isActive}),H(!0)},children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>K(e.id),children:(0,a.jsx)(f.Trash2,{className:"w-4 h-4 text-red-600"})})]})})]},e.id))})]}),0===N.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(y.Package,{className:"w-12 h-12 text-secondary-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-secondary-500",children:"Tidak ada produk"})]}),w>10&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===T,children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",T," of ",Math.ceil(w/10)]}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>S(e=>e+1),disabled:T>=Math.ceil(w/10),children:"Next"})]})]})]}),(0,a.jsx)(c.Modal,{isOpen:P,onClose:()=>{H(!1),V()},title:A?"Edit Produk":"Tambah Produk",size:"lg",children:(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,a.jsx)(d.Input,{label:"Nama Produk",required:!0,value:z.name,onChange:e=>O({...z,name:e.target.value})}),(0,a.jsx)(d.Input,{label:"Deskripsi",value:z.description,onChange:e=>O({...z,description:e.target.value})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.Input,{label:"Harga",type:"number",required:!0,value:z.price,onChange:e=>O({...z,price:e.target.value})}),(0,a.jsx)(d.Input,{label:"Stok",type:"number",required:!0,value:z.stock,onChange:e=>O({...z,stock:e.target.value})})]}),(0,a.jsx)(d.Input,{label:"URL Gambar",type:"url",value:z.imageUrl,onChange:e=>O({...z,imageUrl:e.target.value}),helperText:"URL gambar produk"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.Input,{label:"Kategori",value:z.category,onChange:e=>O({...z,category:e.target.value})}),(0,a.jsx)(d.Input,{label:"Barcode",value:z.barcode,onChange:e=>O({...z,barcode:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:z.isActive,onChange:e=>O({...z,isActive:e.target.checked}),className:"w-4 h-4 text-primary-600 rounded"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"text-sm text-secondary-700",children:"Produk Aktif"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)(i.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{H(!1),V()},children:"Batal"}),(0,a.jsx)(i.Button,{type:"submit",className:"flex-1",isLoading:U,children:A?"Update":"Simpan"})]})]})})]})}e.s(["default",()=>j],72568)}]);