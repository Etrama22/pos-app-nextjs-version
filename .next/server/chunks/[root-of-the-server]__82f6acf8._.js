module.exports=[93695,(e,t,a)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,a)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,a)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},22734,(e,t,a)=>{t.exports=e.x("fs",()=>require("fs"))},48278,e=>{"use strict";let t={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}};var a=e.i(79378);let r={date:(0,a.buildFormatLongFn)({formats:{full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},defaultWidth:"full"}),time:(0,a.buildFormatLongFn)({formats:{full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},defaultWidth:"full"}),dateTime:(0,a.buildFormatLongFn)({formats:{full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},n={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"};var i=e.i(48261);let o={ordinalNumber:(e,t)=>"ke-"+Number(e),era:(0,i.buildLocalizeFn)({values:{narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},defaultWidth:"wide"}),quarter:(0,i.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,i.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},defaultWidth:"wide"}),day:(0,i.buildLocalizeFn)({values:{narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},defaultWidth:"wide"}),dayPeriod:(0,i.buildLocalizeFn)({values:{narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},defaultWidth:"wide",formattingValues:{narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},defaultFormattingWidth:"wide"})};var s=e.i(21457);let l={ordinalNumber:(0,e.i(17441).buildMatchPatternFn)({matchPattern:/^ke-(\d+)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,s.buildMatchFn)({matchPatterns:{narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^s/i,/^(m|e)/i]},defaultParseWidth:"any"}),quarter:(0,s.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,s.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,s.buildMatchFn)({matchPatterns:{narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,s.buildMatchFn)({matchPatterns:{narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},defaultParseWidth:"any"})};e.s(["id",0,{code:"id",formatDistance:(e,a,r)=>{let n,i=t[e];if(n="string"==typeof i?i:1===a?i.one:i.other.replace("{{count}}",a.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"dalam waktu "+n;else return n+" yang lalu";return n},formatLong:r,formatRelative:(e,t,a,r)=>n[e],localize:o,match:l,options:{weekStartsOn:1,firstWeekContainsDate:1}}],48278)},85608,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),n=e.i(59756),i=e.i(61916),o=e.i(14444),s=e.i(37092),l=e.i(69741),d=e.i(16795),u=e.i(87718),m=e.i(95169),p=e.i(47587),c=e.i(66012),h=e.i(70101),g=e.i(26937),f=e.i(10372),y=e.i(93695);e.i(52474);var b=e.i(220),w=e.i(89171),M=e.i(98043),v=e.i(43747),x=e.i(48278),R=e.i(22734);async function k(e){try{var t,a;let r,n,i,o,s,l,d,{searchParams:u}=new URL(e.url),m=u.get("startDate"),p=u.get("endDate"),c={};(m||p)&&(c.createdAt={},m&&(c.createdAt.gte=new Date(m)),p&&(c.createdAt.lte=new Date(p+"T23:59:59")));let h=await M.prisma.sale.findMany({where:c,include:{items:{include:{product:!0}},user:{select:{name:!0}}},orderBy:{createdAt:"desc"}}),g=h.length,f=h.reduce((e,t)=>e+t.total,0),y="Semua waktu";m&&p?y=`${(0,v.format)(new Date(m),"dd MMM yyyy",{locale:x.id})} - ${(0,v.format)(new Date(p),"dd MMM yyyy",{locale:x.id})}`:m?y=`Dari ${(0,v.format)(new Date(m),"dd MMM yyyy",{locale:x.id})}`:p&&(y=`Sampai ${(0,v.format)(new Date(p),"dd MMM yyyy",{locale:x.id})}`);let b=(t={totalSales:g,totalRevenue:f,averageTransaction:g>0?f/g:0},a=y,o=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),s={CASH:"Tunai",DEBIT:"Debit",CREDIT:"Kredit",QRIS:"QRIS",TRANSFER:"Transfer"},l=`========================================
         LAPORAN PENJUALAN POS
========================================

Periode: ${a}
Dicetak: ${(0,v.format)(new Date,"dd MMMM yyyy HH:mm",{locale:x.id})}

----------------------------------------
              RINGKASAN
----------------------------------------
Total Transaksi    : ${t.totalSales}
Total Pendapatan   : ${o(t.totalRevenue)}
Rata-rata Transaksi: ${o(t.averageTransaction)}

----------------------------------------
           DETAIL TRANSAKSI
----------------------------------------

`,h.forEach((e,t)=>{l+=`[${t+1}] ${e.receiptNumber}
    Tanggal : ${(0,v.format)(new Date(e.createdAt),"dd/MM/yyyy HH:mm",{locale:x.id})}
    Kasir   : ${e.user?.name||"-"}
    Items   :
`,e.items.forEach(e=>{let t=e.quantity*e.priceAtSale;l+=`      - ${e.product.name}
        ${e.quantity} x ${o(e.priceAtSale)} = ${o(t)}
`}),l+=`    Pembayaran: ${s[e.paymentMethod]}
    Total     : ${o(e.total)}

`}),r=(l+="========================================\n              END OF REPORT\n========================================\n").split("\n"),n=792,i="",r.forEach(e=>{n<50&&(n=792);let t=e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)");i+=`BT /F1 10 Tf 50 ${n} Td (${t}) Tj ET
`,n-=12}),d=`%PDF-1.4
1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj

2 0 obj
<< /Type /Pages /Kids [3 0 R] /Count 1 >>
endobj

3 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 595 842] /Contents 4 0 R /Resources << /Font << /F1 5 0 R >> >> >>
endobj

4 0 obj
<< /Length ${i.length} >>
stream
${i}
endstream
endobj

5 0 obj
<< /Type /Font /Subtype /Type1 /BaseFont /Courier >>
endobj

xref
0 6
0000000000 65535 f 
0000000009 00000 n 
0000000058 00000 n 
0000000115 00000 n 
0000000266 00000 n 
0000000${(366+i.length).toString().padStart(3,"0")} 00000 n 

trailer
<< /Size 6 /Root 1 0 R >>
startxref
${420+i.length}
%%EOF`,Buffer.from(d)),R=`laporan-penjualan-${(0,v.format)(new Date,"yyyy-MM-dd")}.pdf`,k=new Uint8Array(b);return new w.NextResponse(k,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="${R}"`}})}catch(e){console.error("Error exporting PDF:",e);try{R.default.appendFileSync("export-error.log",`[${new Date().toISOString()}] PDF ERROR: ${e?.stack||e}
`,"utf8")}catch(e){console.error("Failed writing export-error.log:",e)}return w.NextResponse.json({error:"Failed to export PDF"},{status:500})}}e.s(["GET",()=>k],23620);var P=e.i(23620);let S=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/sales/export/pdf/route",pathname:"/api/sales/export/pdf",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/sales/export/pdf/route.ts",nextConfigOutput:"",userland:P}),{workAsyncStorage:A,workUnitAsyncStorage:E,serverHooks:T}=S;function j(){return(0,r.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:E})}async function C(e,t,r){S.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let w="/api/sales/export/pdf/route";w=w.replace(/\/index$/,"")||"/";let M=await S.prepare(e,t,{srcPage:w,multiZoneDraftMode:!1});if(!M)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:v,params:x,nextConfig:R,parsedUrl:k,isDraftMode:P,prerenderManifest:A,routerServerContext:E,isOnDemandRevalidate:T,revalidateOnlyGenerated:j,resolvedPathname:C,clientReferenceManifest:D,serverActionsManifest:F}=M,N=(0,l.normalizeAppPath)(w),$=!!(A.dynamicRoutes[N]||A.routes[C]),H=async()=>((null==E?void 0:E.render404)?await E.render404(e,t,k,!1):t.end("This page could not be found"),null);if($&&!P){let e=!!A.routes[C],t=A.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await H();throw new y.NoFallbackError}}let O=null;!$||S.isDev||P||(O="/index"===(O=C)?"/":O);let I=!0===S.isDev||!$,K=$&&!I;F&&D&&(0,o.setReferenceManifestsSingleton)({page:w,clientReferenceManifest:D,serverActionsManifest:F,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:F})});let W=e.method||"GET",q=(0,i.getTracer)(),_=q.getActiveScopeSpan(),L={params:x,prerenderManifest:A,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:I,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r)=>S.onRequestError(e,t,r,E)},sharedContext:{buildId:v}},U=new d.NodeNextRequest(e),J=new d.NodeNextResponse(t),B=u.NextRequestAdapter.fromNodeNextRequest(U,(0,u.signalFromNodeResponse)(t));try{let o=async e=>S.handle(B,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=q.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${W} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${W} ${w}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var i,l;let d=async({previousCacheEntry:a})=>{try{if(!s&&T&&j&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await o(n);e.fetchMetrics=L.renderOpts.fetchMetrics;let l=L.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=L.renderOpts.collectedTags;if(!$)return await (0,c.sendResponse)(U,J,i,L.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(i.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,r=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:w,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:T})},E),t}},u=await S.handleResponse({req:e,nextConfig:R,cacheKey:O,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:A,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:j,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:s});if(!$)return null;if((null==u||null==(i=u.value)?void 0:i.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",T?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),P&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&$||m.delete(f.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,g.getCacheControlHeader)(u.cacheControl)),await (0,c.sendResponse)(U,J,new Response(u.value.body,{headers:m,status:u.value.status||200})),null};_?await l(_):await q.withPropagatedContext(e.headers,()=>q.trace(m.BaseServerSpan.handleRequest,{spanName:`${W} ${w}`,kind:i.SpanKind.SERVER,attributes:{"http.method":W,"http.target":e.url}},l))}catch(t){if(t instanceof y.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:T})}),$)throw t;return await (0,c.sendResponse)(U,J,new Response(null,{status:500})),null}}e.s(["handler",()=>C,"patchFetch",()=>j,"routeModule",()=>S,"serverHooks",()=>T,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>E],85608)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__82f6acf8._.js.map