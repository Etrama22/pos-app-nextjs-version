module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-secondary-200 bg-white shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight text-secondary-900",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-secondary-500",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-primary-100 text-primary-800"}[d],a),...e})}a.s(["Badge",()=>d])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-secondary-50 font-medium",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-secondary-200 transition-colors hover:bg-secondary-50 data-[state=selected]:bg-secondary-100",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-secondary-500 [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle text-secondary-900 [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-secondary-500",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},25427,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(50944),f=a.i(91119),g=a.i(99570),h=a.i(6015),i=a.i(86304),j=a.i(69769),k=a.i(68114),l=a.i(20494),m=a.i(70106);let n=(0,m.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),o=(0,m.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),p=(0,m.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function q(){let{data:a,status:m}=(0,d.useSession)(),q=(0,e.useRouter)(),{showToast:r}=(0,j.useToast)(),[s,t]=c.useState([]),[u,v]=c.useState(!1);c.useEffect(()=>{"unauthenticated"===m?q.push("/login"):a?.user?.role!=="ADMIN"&&q.push("/pos")},[m,a,q]),c.useEffect(()=>{w()},[]);let w=async()=>{try{let a=await fetch("/api/backup/list?limit=20");if(a.ok){let b=await a.json();t(b.data)}}catch(a){console.error("Error fetching backups:",a)}},x=async()=>{v(!0);try{let a=await fetch("/api/backup/manual",{method:"POST"});if(a.ok)r("success","Backup berhasil dibuat"),w();else{let b=await a.json();r("error",b.error||"Backup gagal")}}catch(a){r("error","Terjadi kesalahan")}finally{v(!1)}},y=async(a,b)=>{try{let c=await fetch(`/api/backup/download?id=${a}`);if(c.ok){let a=await c.blob(),d=window.URL.createObjectURL(a),e=document.createElement("a");e.href=d,e.download=b,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e),r("success","Backup berhasil diunduh")}else r("error","Gagal mengunduh backup")}catch(a){r("error","Terjadi kesalahan")}},z={DAILY:"Harian",WEEKLY:"Mingguan",MONTHLY:"Bulanan",MANUAL:"Manual"};return"loading"===m?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Backup & Restore"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Kelola backup database"})]}),(0,b.jsxs)(g.Button,{onClick:x,isLoading:u,children:[(0,b.jsx)(l.Database,{className:"w-4 h-4 mr-2"}),"Backup Sekarang"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(l.Database,{className:"w-5 h-5 text-primary-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600",children:"Total Backup"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:s.length})]})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(p,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600",children:"Auto Backup"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:"Aktif"})]})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(o,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600",children:"Backup Terakhir"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:s[0]?(0,k.formatDateTime)(s[0].createdAt):"-"})]})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Riwayat Backup"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"File Name"}),(0,b.jsx)(h.TableHead,{children:"Tipe"}),(0,b.jsx)(h.TableHead,{children:"Size"}),(0,b.jsx)(h.TableHead,{children:"Tanggal"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,b.jsx)(h.TableBody,{children:s.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-mono text-sm",children:a.fileName}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(i.Badge,{variant:"info",children:z[a.type]})}),(0,b.jsx)(h.TableCell,{children:(a=>{if(!a)return"-";let b=a/1024;return b<1024?`${b.toFixed(1)} KB`:`${(b/1024).toFixed(1)} MB`})(a.fileSize)}),(0,b.jsx)(h.TableCell,{children:(0,k.formatDateTime)(a.createdAt)}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>y(a.id,a.fileName),children:(0,b.jsx)(n,{className:"w-4 h-4"})})})]},a.id))})]}),0===s.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Database,{className:"w-12 h-12 text-secondary-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-secondary-500",children:"Belum ada backup"})]})]})]})]})}a.s(["default",()=>q],25427)}];

//# sourceMappingURL=src_ef8d6fe0._.js.map