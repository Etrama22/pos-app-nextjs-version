module.exports=[41707,87532,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114),e=a.i(33508);function f({isOpen:a,onClose:f,title:g,children:h,size:i="md"}){return(c.useEffect(()=>{let b=a=>{"Escape"===a.key&&f()};return a&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[a,f]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),(0,b.jsxs)("div",{className:(0,d.cn)("relative z-50 w-full mx-4 bg-white rounded-xl shadow-xl",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[i]),children:[g&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-secondary-200",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:g}),(0,b.jsx)("button",{onClick:f,className:"p-1 rounded-lg text-secondary-500 hover:text-secondary-700 hover:bg-secondary-100 transition-colors",children:(0,b.jsx)(e.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"p-4",children:h})]})]}):null}a.s(["Modal",()=>f],41707);let g=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>g],87532)},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,label:e,error:f,helperText:g,...h},i)=>(0,b.jsxs)("div",{className:"w-full",children:[e&&(0,b.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:e}),(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-lg border border-secondary-300 bg-white px-3 py-2 text-sm text-secondary-900 placeholder:text-secondary-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-secondary-50",f&&"border-red-500 focus:ring-red-500 focus:border-red-500",a),ref:i,...h}),f&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f}),g&&!f&&(0,b.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:g})]}));e.displayName="Input",a.s(["Input",()=>e])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-secondary-200 bg-white shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight text-secondary-900",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-secondary-500",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-primary-100 text-primary-800"}[d],a),...e})}a.s(["Badge",()=>d])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-secondary-50 font-medium",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-secondary-200 transition-colors hover:bg-secondary-50 data-[state=selected]:bg-secondary-100",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-secondary-500 [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle text-secondary-900 [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-secondary-500",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},24722,a=>{"use strict";let b=(0,a.i(70106).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);a.s(["FileSpreadsheet",()=>b],24722)},33637,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(50944),f=a.i(91119),g=a.i(99570),h=a.i(66718),i=a.i(6015),j=a.i(86304),k=a.i(41707),l=a.i(68114),m=a.i(87532),n=a.i(70106);let o=(0,n.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,n.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var q=a.i(38784);let r=(0,n.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),s=(0,n.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var t=a.i(24722);function u(){let{data:a,status:n}=(0,d.useSession)(),u=(0,e.useRouter)(),[v,w]=c.useState([]),[x,y]=c.useState(0),[z,A]=c.useState(1),[B,C]=c.useState(""),[D,E]=c.useState(null),[F,G]=c.useState(null),[H,I]=c.useState(""),[J,K]=c.useState(""),[L,M]=c.useState(!1);c.useEffect(()=>{"unauthenticated"===n?u.push("/login"):a?.user?.role!=="ADMIN"&&u.push("/pos")},[n,a,u]),c.useEffect(()=>{N(),O()},[z,H,J]);let N=async()=>{try{let a=new URLSearchParams({page:z.toString(),limit:"10",...H&&{startDate:H},...J&&{endDate:J}}),b=await fetch(`/api/sales?${a}`);if(b.ok){let a=await b.json();w(a.data),y(a.pagination.total)}}catch(a){console.error("Error fetching sales:",a)}},O=async()=>{try{let a=new URLSearchParams({...H&&{startDate:H},...J&&{endDate:J}}),b=await fetch(`/api/sales/summary?${a}`);if(b.ok){let a=await b.json();G(a)}}catch(a){console.error("Error fetching summary:",a)}},P={CASH:"Tunai",DEBIT:"Debit",CREDIT:"Kredit",QRIS:"QRIS",TRANSFER:"Transfer"},Q=async()=>{M(!0);try{let a=new URLSearchParams({...H&&{startDate:H},...J&&{endDate:J}}),b=await fetch(`/api/sales/export/csv?${a}`);if(b.ok){let a=await b.blob(),c=window.URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=`laporan-penjualan-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d)}}catch(a){console.error("Error exporting CSV:",a)}finally{M(!1)}},R=async()=>{M(!0);try{let a=new URLSearchParams({...H&&{startDate:H},...J&&{endDate:J}}),b=await fetch(`/api/sales/export/pdf?${a}`);if(b.ok){let a=await b.blob(),c=window.URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=`laporan-penjualan-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d)}}catch(a){console.error("Error exporting PDF:",a)}finally{M(!1)}};return"loading"===n?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Riwayat Penjualan"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Laporan transaksi penjualan"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:Q,disabled:L,children:[(0,b.jsx)(t.FileSpreadsheet,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:R,disabled:L,children:[(0,b.jsx)(s,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]}),F&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Total Transaksi"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:F.totalSales})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(q.ShoppingCart,{className:"w-6 h-6 text-primary-600"})})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Total Pendapatan"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:(0,l.formatCurrency)(F.totalRevenue)})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(p,{className:"w-6 h-6 text-green-600"})})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-secondary-600 mb-1",children:"Rata-rata Transaksi"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-secondary-900",children:(0,l.formatCurrency)(F.averageTransaction)})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(r,{className:"w-6 h-6 text-blue-600"})})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,b.jsx)(m.Search,{className:"w-5 h-5 text-secondary-400"}),(0,b.jsx)(h.Input,{placeholder:"Cari transaksi...",value:B,onChange:a=>C(a.target.value),className:"border-0 shadow-none focus:ring-0"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Input,{type:"date",value:H,onChange:a=>I(a.target.value),className:"w-40"}),(0,b.jsx)(h.Input,{type:"date",value:J,onChange:a=>K(a.target.value),className:"w-40"})]})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"No. Struk"}),(0,b.jsx)(i.TableHead,{children:"Tanggal"}),(0,b.jsx)(i.TableHead,{children:"Total"}),(0,b.jsx)(i.TableHead,{children:"Pembayaran"}),(0,b.jsx)(i.TableHead,{children:"Items"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,b.jsx)(i.TableBody,{children:v.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:a.receiptNumber}),(0,b.jsx)(i.TableCell,{children:(0,l.formatDateTime)(a.createdAt)}),(0,b.jsx)(i.TableCell,{className:"font-semibold text-primary-600",children:(0,l.formatCurrency)(a.total)}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"info",children:P[a.paymentMethod]})}),(0,b.jsxs)(i.TableCell,{children:[a.items.length," items"]}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>E(a),children:(0,b.jsx)(o,{className:"w-4 h-4"})})})]},a.id))})]}),0===v.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(q.ShoppingCart,{className:"w-12 h-12 text-secondary-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-secondary-500",children:"Tidak ada transaksi"})]}),x>10&&(0,b.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>A(a=>Math.max(1,a-1)),disabled:1===z,children:"Previous"}),(0,b.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",z," of ",Math.ceil(x/10)]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>A(a=>a+1),disabled:z>=Math.ceil(x/10),children:"Next"})]})]})]}),(0,b.jsx)(k.Modal,{isOpen:!!D,onClose:()=>E(null),title:"Detail Transaksi",size:"lg",children:D&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-secondary-50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary-600",children:"No. Struk"}),(0,b.jsx)("p",{className:"font-medium",children:D.receiptNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary-600",children:"Tanggal"}),(0,b.jsx)("p",{className:"font-medium",children:(0,l.formatDateTime)(D.createdAt)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary-600",children:"Pembayaran"}),(0,b.jsx)("p",{className:"font-medium",children:P[D.paymentMethod]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-secondary-600",children:"Total"}),(0,b.jsx)("p",{className:"font-bold text-primary-600",children:(0,l.formatCurrency)(D.total)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"Items"}),(0,b.jsx)("div",{className:"space-y-2",children:D.items.map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-secondary-50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.product.name}),(0,b.jsxs)("p",{className:"text-sm text-secondary-600",children:[a.quantity," x ",(0,l.formatCurrency)(a.priceAtSale)]})]}),(0,b.jsx)("p",{className:"font-semibold",children:(0,l.formatCurrency)(a.quantity*a.priceAtSale)})]},a.id))})]})]})})]})}a.s(["default",()=>u],33637)}];

//# sourceMappingURL=_521b7de7._.js.map