module.exports=[6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("bg-secondary-50 font-medium",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-secondary-200 transition-colors hover:bg-secondary-50 data-[state=selected]:bg-secondary-100",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-secondary-500 [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle text-secondary-900 [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-secondary-500",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},24722,a=>{"use strict";let b=(0,a.i(70106).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);a.s(["FileSpreadsheet",()=>b],24722)},41707,87532,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114),e=a.i(33508);function f({isOpen:a,onClose:f,title:g,children:h,size:i="md"}){return(c.useEffect(()=>{let b=a=>{"Escape"===a.key&&f()};return a&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[a,f]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),(0,b.jsxs)("div",{className:(0,d.cn)("relative z-50 w-full mx-4 bg-white rounded-xl shadow-xl",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[i]),children:[g&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-secondary-200",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:g}),(0,b.jsx)("button",{onClick:f,className:"p-1 rounded-lg text-secondary-500 hover:text-secondary-700 hover:bg-secondary-100 transition-colors",children:(0,b.jsx)(e.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"p-4",children:h})]})]}):null}a.s(["Modal",()=>f],41707);let g=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>g],87532)},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,label:e,error:f,helperText:g,...h},i)=>(0,b.jsxs)("div",{className:"w-full",children:[e&&(0,b.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:e}),(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-lg border border-secondary-300 bg-white px-3 py-2 text-sm text-secondary-900 placeholder:text-secondary-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-secondary-50",f&&"border-red-500 focus:ring-red-500 focus:border-red-500",a),ref:i,...h}),f&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f}),g&&!f&&(0,b.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:g})]}));e.displayName="Input",a.s(["Input",()=>e])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-secondary-200 bg-white shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight text-secondary-900",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-secondary-500",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-primary-100 text-primary-800"}[d],a),...e})}a.s(["Badge",()=>d])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},31535,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(50944),f=a.i(91119),g=a.i(99570),h=a.i(66718),i=a.i(41707),j=a.i(6015),k=a.i(86304),l=a.i(69769),m=a.i(68114),n=a.i(15618),o=a.i(87532);let p=(0,a.i(70106).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var q=a.i(81560),r=a.i(83497),s=a.i(24722);function t(){let{data:a,status:t}=(0,d.useSession)(),u=(0,e.useRouter)(),{showToast:v}=(0,l.useToast)(),[w,x]=c.useState([]),[y,z]=c.useState(0),[A,B]=c.useState(1),[C,D]=c.useState(""),[E,F]=c.useState(!1),[G,H]=c.useState(null),[I,J]=c.useState(!1),[K,L]=c.useState(!1),[M,N]=c.useState({name:"",description:"",price:"",stock:"",imageUrl:"",category:"",barcode:"",isActive:!0});c.useEffect(()=>{"unauthenticated"===t?u.push("/login"):a?.user?.role!=="ADMIN"&&u.push("/pos")},[t,a,u]),c.useEffect(()=>{O()},[A,C]);let O=async()=>{try{let a=new URLSearchParams({page:A.toString(),limit:"10",...C&&{search:C}}),b=await fetch(`/api/products?${a}`);if(b.ok){let a=await b.json();x(a.data),z(a.pagination.total)}}catch(a){console.error("Error fetching products:",a)}},P=async a=>{a.preventDefault(),J(!0);try{let a=G?`/api/products/${G.id}`:"/api/products",b=await fetch(a,{method:G?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...M,price:parseFloat(M.price),stock:parseInt(M.stock)})});if(b.ok)v("success",G?"Produk berhasil diupdate":"Produk berhasil ditambahkan"),F(!1),R(),O();else{let a=await b.json();v("error",a.error||"Gagal menyimpan produk")}}catch(a){v("error","Terjadi kesalahan")}finally{J(!1)}},Q=async a=>{if(confirm("Yakin ingin menghapus produk ini?"))try{let b=await fetch(`/api/products/${a}`,{method:"DELETE"});if(b.ok)v("success","Produk berhasil dihapus"),O();else{let a=await b.json();v("error",a.error||"Gagal menghapus produk")}}catch(a){v("error","Terjadi kesalahan")}},R=()=>{H(null),N({name:"",description:"",price:"",stock:"",imageUrl:"",category:"",barcode:"",isActive:!0})},S=async()=>{L(!0);try{let a=await fetch("/api/products/export/csv");if(a.ok){let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`daftar-produk-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d),v("success","Export berhasil")}}catch(a){console.error("Error exporting CSV:",a),v("error","Gagal export data")}finally{L(!1)}};return"loading"===t?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Manajemen Produk"}),(0,b.jsx)("p",{className:"text-secondary-600",children:"Kelola data produk"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:S,disabled:K,children:[(0,b.jsx)(s.FileSpreadsheet,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),(0,b.jsxs)(g.Button,{onClick:()=>F(!0),children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Tambah Produk"]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"py-4 px-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 border border-gray-200 max-w-max rounded-xl px-2",children:[(0,b.jsx)(o.Search,{className:"w-5 h-5 text-gray-400"}),(0,b.jsx)(h.Input,{placeholder:"Cari produk...",value:C,onChange:a=>D(a.target.value),className:"border-0 shadow-none focus:ring-0"})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Nama"}),(0,b.jsx)(j.TableHead,{children:"Harga"}),(0,b.jsx)(j.TableHead,{children:"Stok"}),(0,b.jsx)(j.TableHead,{children:"Kategori"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,b.jsx)(j.TableBody,{children:w.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-10 h-10 rounded object-cover"}):(0,b.jsx)("div",{className:"w-10 h-10 bg-secondary-100 rounded flex items-center justify-center",children:(0,b.jsx)(r.Package,{className:"w-5 h-5 text-secondary-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-secondary-500 line-clamp-1",children:a.description})]})]})}),(0,b.jsx)(j.TableCell,{children:(0,m.formatCurrency)(a.price)}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(k.Badge,{variant:a.stock>10?"success":a.stock>0?"warning":"danger",children:a.stock})}),(0,b.jsx)(j.TableCell,{children:a.category||"-"}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(k.Badge,{variant:a.isActive?"success":"default",children:a.isActive?"Aktif":"Nonaktif"})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>{H(a),N({name:a.name,description:a.description||"",price:a.price.toString(),stock:a.stock.toString(),imageUrl:a.imageUrl||"",category:a.category||"",barcode:a.barcode||"",isActive:a.isActive}),F(!0)},children:(0,b.jsx)(p,{className:"w-4 h-4"})}),(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>Q(a.id),children:(0,b.jsx)(q.Trash2,{className:"w-4 h-4 text-red-600"})})]})})]},a.id))})]}),0===w.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(r.Package,{className:"w-12 h-12 text-secondary-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-secondary-500",children:"Tidak ada produk"})]}),y>10&&(0,b.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>B(a=>Math.max(1,a-1)),disabled:1===A,children:"Previous"}),(0,b.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",A," of ",Math.ceil(y/10)]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>B(a=>a+1),disabled:A>=Math.ceil(y/10),children:"Next"})]})]})]}),(0,b.jsx)(i.Modal,{isOpen:E,onClose:()=>{F(!1),R()},title:G?"Edit Produk":"Tambah Produk",size:"lg",children:(0,b.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,b.jsx)(h.Input,{label:"Nama Produk",required:!0,value:M.name,onChange:a=>N({...M,name:a.target.value})}),(0,b.jsx)(h.Input,{label:"Deskripsi",value:M.description,onChange:a=>N({...M,description:a.target.value})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(h.Input,{label:"Harga",type:"number",required:!0,value:M.price,onChange:a=>N({...M,price:a.target.value})}),(0,b.jsx)(h.Input,{label:"Stok",type:"number",required:!0,value:M.stock,onChange:a=>N({...M,stock:a.target.value})})]}),(0,b.jsx)(h.Input,{label:"URL Gambar",type:"url",value:M.imageUrl,onChange:a=>N({...M,imageUrl:a.target.value}),helperText:"URL gambar produk"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(h.Input,{label:"Kategori",value:M.category,onChange:a=>N({...M,category:a.target.value})}),(0,b.jsx)(h.Input,{label:"Barcode",value:M.barcode,onChange:a=>N({...M,barcode:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isActive",checked:M.isActive,onChange:a=>N({...M,isActive:a.target.checked}),className:"w-4 h-4 text-primary-600 rounded"}),(0,b.jsx)("label",{htmlFor:"isActive",className:"text-sm text-secondary-700",children:"Produk Aktif"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{F(!1),R()},children:"Batal"}),(0,b.jsx)(g.Button,{type:"submit",className:"flex-1",isLoading:I,children:G?"Update":"Simpan"})]})]})})]})}a.s(["default",()=>t],31535)}];

//# sourceMappingURL=_8befcd6d._.js.map